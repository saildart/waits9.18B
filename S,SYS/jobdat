COMMENT ⊗   VALID 00003 PAGES
C REC  PAGE   DESCRIPTION
C00001 00001
C00002 00002	JOBDAT	31 AUG 67 - JOB DATA AREA
C00003 00003	
C00009 ENDMK
C⊗;
SUBTTL JOBDAT	31 AUG 67 - JOB DATA AREA


;*******	NOTE	  ********
;remember, JOBDAT[CSP,SYS] contains the definitions that users get to see!


;THIS AREA PROVIDES STORAGE OF ITEMS OF INTEREST TO BOTH 
;THE MONITOR AND THE USER

;MACRO TO DEFINE SYMBOLS FOR MONITOR USE ONLY
;THESE MAY BE CHANGED TO SUIT MONITOR

DEFINE M'(SYMBOL,VALUE,LENGTH)
<SYMBOL←←VALUE
XXLOC←←VALUE+LENGTH>

;MACRO TO DEFINE SYMBOLS FOR USER USE
;THESE CANNOT BE CHANGED WITHOUT INVALIDATING OLD SAVED FILES

DEFINE U'(SYMBOL,VALUE,LENGTH)
<SYMBOL←←VALUE
XXLOC←←VALUE+LENGTH>


;remember, JOBDAT[CSP,SYS] contains the definitions that users get to see!
M JOBAC,0,20		;PLACE WHERE USER ACS ARE STORED ON UUO CALLS
			;IE RELATIVE 0-17 IN USER AREA
M JOBDAC,XXLOC,17	;PLACE WHERE HARDWARE ACS(0-16) ARE STORED
			;WHEN JOB IS INACTIVE. THESE ARE EITHER THE
			;USERS AC IF JOB WAS STOPPED IN USER MODE
			;OR ARE THE EXEC IF STOPED IN EXEC MODE
			;0-16 ALSO STORED HERE ON CLK INTERRUPTS
XP JOBD15,JOBDAC+15	;AC 15 DUMPED HERE
XP JOBD16,JOBDAC+16	;AC 16 DUMPED HERE
XP JOBD17,JOBDAC+17	;AC 17 DUMPED HERE
U JOBUUO,40,1		;USER UUO TRAP LOC.(UUO STORED HERE)
U JOB41,41,1		;USER UUO JSR LOCATION
U JOBERR,42,1		;IN WHICH RPG SYSTEM PASSES ERRORS TO THE LOADER
U JOBENB,43,1		;LH=PC CHNG,AR OVF ENABLE/DISABLE APR BITS
			;RH=APR CONSO FLAGS FOR USER APR TRAPPING
			;SET BY CALL [SIXBIT /APRENB/]
U JOBREL,44,1		;LH=0,RH=HIGHEST REL. ADR. IN USER AREA
M JOBTM1,XXLOC,1	; SOME TEMP CELLS TOO
M JOBTM2,XXLOC,1
M JOBTM3,XXLOC,1
M JOBTM4,XXLOC,1
M JOBTM5,XXLOC,1
M JOBPDL,XXLOC,1	; PUSHDOWN LIST FOR GETPDL AND GIVPDL TO USE
XXLOC←←71
XP JOBPLN,XXLOC-JOBPDL
U JOBINT,XXLOC,1	;TO SEPARATE OLD AND NEW INTERRUPT SYSTEMS
XP JOBPRT,XXLOC		;FIRST LOC PROTECTED BY BEING COPIED INTO MONITOR
XP JOBPR1,JOBPRT+1	;FIRST LOC+1
U JOBHCU,XXLOC,1	;HIGHEST USER IO CHANNEL IN USE
			;ONLY JOBJDA...JOBJDA+C(JOBHCU) ARE COPIED INTO
			;MONITOR WHEN JOB IS RUN. 0 MEANS NONE OR
			;CHAN. 0 IN USE, -1 MEANS SAVEGET HAS ACTIVE IO

U JOBPC,XXLOC,1		;JOB PC WHEN JOB INACTIVE
U JOBDDT,74,1		;LH UNUSED,RH=STARTING ADDRESS OF USER DDT
XP JOBSAV,JOBDDT-1	;FIRST LOC.-1 WRITTEN BY SAVE COMMAND
U JOBJDA,XXLOC,20	;JOB DEVICE ASSIGNMENT TABLE
			;LH=UUOS DONE SO FAR,RH=ADR. OF DEVICE DATA BLOCK IN MONITOR
XP JOBJMH,JOBHCU-JOBJDA	;JOBHCU-JOBJDA
			;USED BY ANYACT ROUT. IN CORE1
XP JOBPFI,JOBJDA+17	;HIGHEST LOC. IN JOB DATA AREA PROTECTED FROM IO
XP MJOBCK,JOBPFI-JOBDAC	;AREA CHECKSUMMED DURING SWAPPING

↓JOBPRT←←JOBPRT		;MAKE DOWNWARDS AVAILABLE
↓JOBPFI←←JOBPFI		;MAKE DOWNWARDS AVAILABLE

U JOBHRL,115,1
JOBRL2←←JOBHRL
U JOBSYM,116,1	;POINTER TO LOADER AND DDT SYMBOL TABLE POINTER
U JOBUSY,117,1	;POINTER TO UNDEFINED SYMBOL TABLE
		;SET BY LOADER, NOT YET USED BY DDT
U JOBSA,120,1	;LH=FIRST LOC NOT LOADED BY RELOCATING LOADER
		;RH=STARTING ADDRESS OF USER PROGRAM
U JOBFF,121,1	;FIRST FREE LOCATION IN USER AREA
		;USED BY MONITOR TO ASSIGN I/O BUFFERS IN TOP
		;OF USER AREA
U JOBS41,122,1	;C(JOB41) SAVED HERE ON SAVE COMMAND
		;RESTORE FROM HERE ON GET
M JOBEXM,XXLOC,1;LAST LOC EXAMINED OR DEPOSITED USING 
		;D OR E COMMANDS
U JOBREN,124,1	;REENTER ADDRESS FOR REENTER COMMAND
U JOBAPR,125,1	;PLACE TO TRAP TO IN USER AREA ON APR TRAP
		;ENABLED BY APRENB UUO
U JOBCNI,126,1	;APR IS CONIED INTO C(JOBCNI) ON APR TRAP
U JOBTPC,127,1	;PC IS STORED HERE ON USER APR TRAP
U JOBOPC,130,1	;OLD PC IS STORED HERE ON START,DDT,REENTER,
		;STARTC COMMANDS
U JOBCHN,131,1	;LH=FIRST LOC AFTER FIRST FORTRAN 4 LOADED PROGRAM
		;RH=FIRST LOC AFTER FIRST FORTRAN 4 BLOCK DATA
		;TO BE USED FOR JOB CHAINING
M JOBFDV,XXLOC,1;DEV. DATA BLOCK ADR. FOR FINISH COMMAND
U JOBCOR,133,1	;SIZE OF CORE FOR JOB ON RUN,SAVE,GET COM.
M HINAME,134,1	;NAME OF UPPER SEGMENT OVER SAVE-GET
M HILOC,135,1	;LOC OF UPPER SEGMENT IN DUMP FILE OVER SAVE-GET
U JOBVER,137,1	;JOB VERSION
XP JOBDA,140	;FIRST LOC NOT USED BY JOB DATA AREA

PURGE M,U
