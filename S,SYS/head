COMMENT ⊗   VALID 00005 PAGES
C REC  PAGE   DESCRIPTION
C00001 00001
C00002 00002	DEFINE SYSTEM<.TTL(18/B,01/12/88)>
C00019 00003	SOME INTERRELATIONS AMONG ASSEMBLY SWITCHES
C00030 00004	Macros for setting up system name
C00034 00005	These definitions are for @'s benefit
C00038 ENDMK
C⊗;
DEFINE SYSTEM<.TTL(18/B,01/12/88)>

DEFINE XD(SYMBOL,VALUE),<↓SYMBOL←←VALUE
	INTERNAL SYMBOL	;make LOADER check for mismatch with MACRO code
>;XD (XD is redefined in OUTER)
DEFINE XP(SYMBOL,VALUE),<SYMBOL←←VALUE>

;Copyright (C) 1987 by Stanford University.  All rights reserved.

;List of independent monitor features.  Any of these features
;can be eliminated from a system by setting the appropriate
;FTXXXX symbol below to 0 and reassembling the system.

;** N.B.: Switches that have different values for the SAIL, CCRMA and LLL
;systems appear here in their values for SAIL.  The next page lists
;switches that have different values for CCRMA and/or LLL.

;Most recently changed feature switches occur first in the list below.
;(Move to top of list when changing a switch's setting.)

;(CCRMA has lots of additional switches that may have to be added when
;system sources are merged.  Only switches that affect PUPSER have been
;entered here.)

XD FTAMPD,-1	;-1 for real C1/Ampex disk at SAIL

XD FTDOM,-1	;-1 to enable domain record caching

XD FTNUDP,0	;-1 to enable "mounting" code upon RH UDP online interrupt

XD FTPKTL,0	;-1 to enable PUP packet logging (might be usable for IP)

XD FTETHX,0	;-1 to allow user to hack random Ethernet packet types

XD FTETH2,0	;-1 if more than one ethernet interface (and fix PUPSER)

XD FTPUPD,0	;-1 to chase a core clobbering bug (PUPSER)

XD FTYODA,0	;-1 for Yodanet features in PUPSER

XD FTXADR,0	;-1 for some use of extended addressing (for the VRN).

XD FTVRN1,0	;-1 if the VRN is on the KL's IO bus.

XD FTC1MAIN,0	;-1 if Ampex/C1 disk(s) hold main file system

XD FTRHRAW,0	;-1 if RH disks are raw: they exist but without home blocks & SAT

XD FTUFDB,0	;-1 to debug DSKSER's vanishing UFD entry, needs FTDBGB

XD FTDBGB,-1	;-1 for code to save event sequences in circular debugging buffer

XD FTAIP,-1	;-1 for ARPAnet (or MILnet) IP.
		;If you change this, change it in F.MAC and recompile all.

XD FT1PAK,-1	;-1 if Ampex disk file system is on one pack at SAIL

XD FTMACP,0	;-1 if all the MACRO code should be write protected

XD FTDCBUG,-1	;-1 for debugging code for data missed problem in MTCSER

XD FTSTRU,-1	;-1 for new style ''Disk Structures'' (needed for FTRH)

XD FTRH,-1	;-1 to enable code for RH-20 devices

XD FTAS,-1	;-1 for audio switch.  True for SAIL and CCRMA

XD FT17P,-1	;-1 to renumber ACs to make P be 17 (necessary for FTRH).
		;If you change this, change it in F.MAC and recompile all.

XD FTEIP,-1	;-1 for Ethernet IP
		;If you change this, change it in F.MAC and recompile all.

XD FTETHB,0	;-1 for class B SU-NET IP addresses
		;If you change this, change it in F.MAC and recompile all.

XD FTSEPONCE,-1	;-1 if DDT and ONCE are compiled separately

XD FTCHCK,-1	;-1 if checksumming IP packets

XD FTREV8,-1	;-1 IF MACHINE IS MODIFIED WITH REV 8

XD FTKLB,-1	;-1 TO ENABLE CODE FOR KL MODEL B PROCESSOR

XD FTPRIQ,0	;-1 TO ENABLE PRIORITY SCHEDULING AND SL, ELSE ROUND ROBIN

XD FT1DSK,-1	;-1 WHEN ALL DISK PACKS ARE ON ONE CONTROLLER (C.U. #1)

XD FTVDIL,-1	;-1 TO ENABLE VADIC DIALER (IN PLACE OF OLD DIALER)

XD FTSBSUP,-1	;-1 TO ENABLE SUPPRESSING SENSE BYTE TYPEOUT

XD FTPOLY,0	;-1 TO INCLUDE POLSER

XD FTDKTM,-1	;-1 TO TIME DISK TRANSFERS (KL10, F2 with timer enabled)

XD FTVBEEP,0	;-1 TO FLASH WHO LINE ON GRINNELL

XD FTOTAP,-1	;-1 FOR NON-INTERRUPTABLE F2 TAPE MICROCODE (AS DELIVERED)

XD FTJDV,0	;-1 TO ENABLE JOB DEVICES (NOT FINISHED)

XD FTNDTE,-1	;-1 TO ENABLE BUFFERING OF CMDS TO DTE AT DTEXX

XD FTT11BELL,0	;-1 TO USE DOORBELL INSTEAD OF TO11DN TO END TO-11 XFER
		;THIS SWITCH AND ASSOCIATED CODE CAN GO AWAY.

XD FTDTBG,-1	;-1 FOR DTE TO-11 BUGTRAPS.  ASSUMES SIMILAR CODE IN KLDCP

XD FTMGS,-1	;-1 TO INCLUDE MG MEMORY (OTHERWISE JUST ARM-10M)

XD FTNCU,0	;-1 TO AVOID CACHING SPECIAL PIECES OF UUO HANDLER
		;YOU MIGHT ALSO WANT TO ZERO FTCSHD TO AVOID CACHING CACDAT

XD FTCSHD,-1	;-1 TO CACHE CACDAT

XD FTDLS,0	;-1 IF USING A DC10 (SIMULATION) ON F2

XD FTAPR4,0	;-1 TO PUT APR IN CHANNEL 4 AND DSK IN CHANNEL 3 (F2 only)

XD FT8UNI,-1	;-1 TO MAKE DEVICE UNIT NUMBER FIELD 8 BITS WIDE (NOT 7)

XD FTUNXM,-1	;-1 TO ENABLE GIVING USER A NXM WHEN REALLY NO MEMORY (GETHI)

XD FTDMAP,-1	;-1 TO ENABLE MAPPING DDT IN AND OUT OF VIRTUAL SPACE

XD FTSAC2,-1	;-1 TO INCLUDE MRC'S DUBIOUS FIX TO SHTOAC

XD FTDDLOSS,0	;-1 TO TURN DD PAGE PRINTER CRLFs INTO CRLFCRs for screwed DD

XD FTFBI,-1	;-1 TO ENABLE REPORTING NAMES OF JOBS DOING SOME SPECIAL UUO
;FBI IS CURRENTLY USED TO REPORT: FEATURE 0
;feature 4 is for users of POINTS UUO
;feature 5 is at SETES2 to see if that code is needed at all.
;feature 6 is unused (formerly at PUPOLD to find old PUPSER users).
;feature 7 is at DLOOK in DSKSER to find programs referencing files that have
;  gone away.

XD FTSIMCHR,0	;-1 TO SIMULATE NON-ASR33 CHRS ON THE F2 GRINNEL
		; (set to 0 to try new character PROMs)

XD FTSTAT,0	;-1 TO INCLUDE JAM'S SWAPPING STATISTICS
		;This can't be turned on without fixing format of statistics
		;to allow for more than 6 bits of job number.

XD FTSCTY,-1	;-1 TO ALLOW CTY TO BE ON TTY SCANNER (IF SCNCTY CELL SET)

XD FTLCLDM,-1	;-1 TO ENABLE PERMANENT DPY DESCRIPTOR STUFF FOR LOCAL DMs

XD FTIRMA,0	;-1 TO ENABLE REPORTING ON CTY OF LOST TTY OUTPUT INTERRUPTS

XD FTDD,-1	;-1 TO INCLUDE ALL DD CODE

XD FTGRIN,0	;-1 TO INCLUDE GRINNELL CODE (SIMILAR TO DD)

XD FTSAM,0	;-1 TO INCLUDE SAMSER

XD FTREAD,0	;IF SAMSER INCLUDED, ENABLES ERROR ACCOUNTING (SPURIOUS INTS ETC)

XD FTMAOFF,-1	;-1 IF KA HAS MAOFF BIT IN APR CONI (F2 DOESN'T)

XD FT11CLK,-1	;-1 TO ENABLE PDP11 BATTERY CLOCK CODE

XD FTP2,0	;-1 IF THERE IS A P2 (E.G., KA-10)

XD FTSECC,-1	;-1 TO SUPPRESS 7 OUT OF 8 ECC TYPEOUTS (SEE DSKSER)

XD FTPSCAN,-1	;-1 TO ENABLE TRACING AT PSCAN IN IMPSER

XD FT215C,-1	;-1 TO CHECK LOWCORE 215 FOR CLOBBERAGE

XD FTADRB,-1	;-1 TO ENABLE AUTOMATIC ADDRESS BREAKING

XD FTKIM,0	;-1 TO ENABLE KIM SERIAL TTYS

XD FTSIX,0	;-1 TO INCLUDE SIXSER

XD FTSPWT,-1	;-1 TO ENABLE TTREAD FOR SERIALIZED KBD

XD FTDDKLU,-1	;-1 TO ENABLE FEATURE OF OPTIONALLY RELOCATING SOME DD OUTPUT

XD FTMTHMESS,-1	;-1 TO TYPE OUT MESSAGE ON CTY UPON HUNG MAGTAPE

XD FTMPX,-1	;-1 IF THERE IS A MAPPIPLEXOR

XD FTKL10,-1	;-1 FOR KL10 SYSTEM

XD PRCONF,2	;0 = KA/166; 1 = KL/166;  2 = KL/KA

XD FTVRN,-1	;-1 TO ENABLE VARIAN PLOTTER DEVICE SERVICE

XD FTQECC,-1	;-1 TO ENABLE SUPPRESSING SELECTED DF ECC MESSAGES

XD FTMONCIP,-1	;-1 TO ENABLE CODE FIXING DELAYED LONG MONITOR COMMANDS

XD FTDTTYBUG,0	;-1 TO ENABLE BUGTRAPS FOR LOST TTY DDBS

XD FTDRD,0	;-1 FOR REDUNDANCY CHECKS/BUG TRAPS. (DEPT REDUNDANCY DEPT.)

XD FTRFNM,0	;-1 TO LOG IMP SPURIOUS RFNM'S (HAPPENS TOO OFTEN)

XD FTDDTIME,-1	;-1 TO KEEP TRACK OF DELAY FOR ALL DD TASKS, PER TYPE

XD FTSLCORE,0	;-1 TO DEDUCT COST OF CORE FROM GUARANTEED SL

XD FTP2DDT,-1	;-1 TO INCLUDE DDT IN THE SEPARATE P2 SYSTEM

XD FTIMPFSBUG,0	;-1 FOR IMPSER FREE STORAGE BUGTRAPS

XD FTMPP2,-1	;-1 FOR UPMP EVM ALLOCATION BY PI LVL NOT BY JOB

XD FTPJOBN,-1	;-1 FOR THE PJOBN BUG TRAP

XD FTDSYI,-1	;-1 TO NOT HANG UP THE PHONE IN DCASER ON RELOAD

XD FTDCHK,-1	;-1 TO INCLUDE DCACHK CODE FOR DCA DEBUGGING

XD FTHIFS,-1	;-1 FOR HIGH CORE FS FOR IMPSER

XD FTFSCALL,-1	;-1 FOR SAVING FS USE COUNT BY CALLER'S ADDR

XD FTECCT,-1	;-1 FOR ECC TABLE TO CATCH HEAD CRASHES

XD FTMAPP,-1	;-1 TO ENABLE PAGE MAPS INITIALIZED AS I/O PAGES

XD FTCMDBUG,-1	;-1 TO ENABLE BUGTRAP FOR COMCNT NOT GETTING SOSED RIGHT

XD FTARM10M,-1	;-1 TO USE ARM10M 2048K MEMORY

XD FTELOK,0	;-1 TO LOCK E'S UPPER SEGMENT IN CORE

XD FTC1BUG,-1	;-1 TO ENABLE C1 DISK CHANNEL BUG TRAP RECORDING

XD FTESCCBUG,-1	;-1 TO ENABLE ESC CALL BUG TRAPS

XD FTDMDP,0	;-1 FOR DEMAND PAGING (I KNEW THAT WOULD GET YOUR ATTENTION)

XD FTREFBUG,0	;-1 TO ENABLE DSKSER REFTIME IN UFD BUG TRAP

XD FTGRP,-1	;-1 TO ENABLE GROUP ACCESS TO UFDS

XD FTLUFD,-1	;-1 TO USE LONG UFD ENTRIES

XD FTDCSH,0	;-1 TO ENABLE HAIRY DISK CACHE CODE

XD FTDOPS,-1	;-1 TO REDUCE DISK OPS, LESS REDUNDANT RETRIEVAL

XD FTSBP,-1	;-1 TO ENABLE SYSBUF PAGES

XD FTREPT,-1	;-1 TO ENABLE LINE EDITOR REPEAT COMMANDS

XD FTMSYSBUF,-1	;-1 TO ENABLE MULTIPLE SYSBUF CODE

XD FTACBUG,-1	;-1 TO ENABLE AC CLOBBERAGE BUG TRAP

XD FT2LVL,0	;-1 TO ENABLE SECOND LEVEL SCHEDULING

XD FTFSAVBUG,0	;-1 TO ASSEMBLE FSAVB BUGTRAP

XD FTTVFS,-1	;-1 TO USE FREE STORAGE FOR TV BUFFER

XD FTSETSEC,-1	;-1 TO USE DISK SET SECTOR COMMAND

XD FTUPCLB,0	;-1 TO ENABLE UPPER SEGMENT CLOBBERAGE BUG TRAPS

XD FTMTRTIME,-1	;-1 TO ENABLE TIME COMMAND TO TYPE OUT EBOX USEC

XD FTMTRACT,0	;-1 TO ENABLE ACCOUNTING USING ACCOUNTING METER

XD FTRANGE,-1	;-1 TO ENABLE SUPPRESSION OF DM XFERS OUTSIDE USER RANGE

XD FTTVBUF,-1	;-1 FOR INTERNALLY BUFFERED TV SERVICE

XD FTDDDM,-1	;-1 FOR DATA DISK USE OF MAPPIPLEXOR

XD FTSWPM,0	;-1 FOR SWAPPER USE OF MAPPIPLEXOR

XD FTDSKM,0	;-1 FOR DISK USE OF MAPPIPLEXOR

XD FTDDFSBUG,0	;-1 TO ENABLE BUG TRAPS IN QBLOCK, GIVQ AND QDM FOR DDFS BUG

XD FTCINS,-1	;-1 FOR MICROCODED CHECKSUM INSTRUCTION

XD FTP2PAG,-1	;-1 FOR P2 HAS AND USES ITS PAGER

XD FTHPSG,0	;-1 TO ALLOW SEGMENTS TO USE HI-PAGES

XD FTHSYS,0	;-1 TO ASSEMBLE TWO-SEGMENT SYSTEM INTO HIGH CORE.

XD FTSCNBUG,-1	;-1 TO ENABLE UUO LEVEL AND CH7 BUG TRAPS FOR SCANNER CHANNEL

XD FTMQBUG,-1	;-1 FOR THE MTQ BUGTRAP

XD FTNSWP,-1	;-1 FOR NEW STYLE SWAPPING SPACE ALLOCATION

XD FTSWPC,-1	;-1 TO COMPILE SWPCHK CODE

XD FTSINBUG,0	;-1 TO CHECK FOR IN PROG CH 1-6 AT SETSIN AND CLRSIN

XD FTDEVLUP,0	;-1 TO INCLUDE DEVICES ACCESSABLE BY "LOCAL USERS" ONLY.

XD FTDSTT,0	;-1 FOR DISK HISTORY/STATISTICS GATHERING

XD FTCSCB,0	;-1 FOR PWAIT/XWAIT BUG TRAP

XD FTDDBG,0	;-1 FOR DATA DISK QUEUE CHECKING

XD FTCORBUG,0	;-1 FOR CORE TABLE CONSISTIENCY CHECK

XD FTDDSTAT,0	;-1 TO INCLUDE THE DATA DISK STATISTICS FEATURE

XD FTNEWS,-1	;-1 TO ENABLE THE NEWS SERVICE PHANTOMS, ETC.

XD FTHG,-1	;-1 TO INCLUDE HISTOGRAM COLLECTION ROUTINES

XD FTDDT,-1	;-1 TO INCLUDE DDT

IFNDEF P2SYS,<↓P2SYS←←0>	; normally assembling P1 monitor
;SOME INTERRELATIONS AMONG ASSEMBLY SWITCHES

;Now defined in WATSIT[S,SYS], which comes before HEAD:
;WATSIT	;Site number: 0 is SAIL
	;Site number: 1 is CCRMA
	;Site number: 2 is LLL
;FTSUAI,FTCCRMA,FTLLL,FTF2

;This INTERN statement makes the LOADER ensure that these switches have the
;same values in the MACRO code (if used there) as here.
INTERN WATSIT,FTSUAI,FTCCRMA,FTLLL,FTF2

IFN FTDDT,<XD EDDT,21>		;EXEC MODE SYSTEM DDT
IFE FTDDT,<XD FTDMAP,0>		;NO MAPPED DDT IF NO DDT

;				;IN ORDER TO NOT SHUFFLE WE MUST
;FTTVBUF,-1			;RUN THE TV BUFFERED
;;FTSWPM,-1			;RUN THE SWAPPER THROUGH THE MAPPIPLEXOR
;;FTDSKM,-1			;RUN THE DISK THROUGH THE MAPPIPLEXOR
;FTDDDM,-1			;RUN THE DATA DISK THROUGH THE MAPPIPLEXOR
;FTHPSG,0			;NOT RUN SEGMENTS IN HI CORE
;FTHSYS,0			;AND NOT SPLIT THE SYSTEM INTO TWO PIECES

;				;IN ORDER TO RUN NEW DISK CODE WE MUST
;FTDSKM,0			;NOT USE THE MAPPIPLEXOR FOR THE DISK
;FTSWPM,0			;NOT USE THE MAPPIPLEXOR FOR SWAPPING

;				;IN ORDER TO RUN THE IMP WE MUST
;FTHIFS,-1			;RUN WITH HIGH FREE STORAGE

IFN FTLUFD,<XD FTDOPS,-1>

IFE FTMAPP,<XD FTMPP2,0>	;NO FANCY EVM FOR UPMP IF NOT KEPT IN CORE

IFN P2SYS,<XD FTF2,0>		;THERE IS A P2, THEN THERE IS NO F2

IFN FTLLL,<	;LLL WAITS assembly switches, where different from SAIL's.
	XD FTRH,0	;-1 to enable code for RH-20 devices
	XD FTAS,0	;-1 for audio switch.  True for SAIL and CCRMA
	XD FTEIP,0	;-1 for Ethernet IP
	XD FTPRIQ,-1    ;-1 TO ENABLE PRIORITY SCHEDULING AND SL, ELSE ROUND ROBIN
	XD FTDKTM,0	;-1 TO TIME DISK TRANSFERS
	XD FTNCU,0	;-1 TO AVOID CACHING SPECIAL PIECES OF UUO HANDLER
	XD FTCINS,0	;-1 FOR MICROCODED CHECKSUM INSTRUCTION
	XD FTADRB,0	;-1 TO ENABLE AUTOMATIC ADDRESS BREAKING
	XD FTDLS,0	;-1 IF USING A DC10 SIMULATION, 0 FOR DCA SIMULATION
	XD FTSMBG,0	;-1 IF SAMSER IS INCLUDED TO TRAP CONI SAMA, BUG (SEE SAMLO)
	XD FTAPR4,0	;-1 TO PUT APR IN CHANNEL 4 AND DSK IN CHANNEL 3 (F2 only)
	XD FTDMAP,0	;-1 TO ENABLE MAPPING DDT IN AND OUT OF VIRTUAL SPACE
	XD FTSAM,0	;-1 TO INCLUDE SAMPSON BOX SERVICE IN SAMSER
	XD FTGRIN,0	;-1 TO INCLUDE GRINNELL CODE (SIMILAR TO DD)
	XD FTDDKLU,0	;NO DD OUTPUT POSSIBLY TO RELOCATE
	XD FTDD,0	;NO DATA DISCS ON THE F2 EVER
	XD FTDLSM,0	;-1 IF F2 DLS MICROCODE NOW HAS MODEM CONTROL
	XD FTKL10,0	;F2 ISN'T A KL
	XD PRCONF,0	;BUT IT IS SORT OF A KA
	XD FTP2,0	;NO P2 ON THE F2
	XD FTREPT,0	;-1 TO ENABLE LINE EDITOR REPEAT COMMANDS
	XD FTMAOFF,0	;-1 IF KA HAS MAOFF BIT IN APR CONI (F2 DOESN'T)
	XD FTMPX,0	;-1 IF THERE IS A MAPPIPLEXOR
	XD FTNEWS,0	;-1 TO ENABLE THE NEWS SERVICE PHANTOMS, ETC.
	XD FTDDSTAT,0	;-1 TO INCLUDE THE DATA DISK STATISTICS FEATURE
	XD FTDDBG,0	;-1 FOR DATA DISK QUEUE CHECKING
	XD FTCSCB,0	;-1 FOR PWAIT/XWAIT BUG TRAP
	XD FTDSKM,0	;-1 FOR DISK USE OF MAPPIPLEXOR
	XD FTSWPM,0	;-1 FOR SWAPPER USE OF MAPPIPLEXOR
	XD FTDDDM,0	;-1 FOR DATA DISK USE OF MAPPIPLEXOR
	XD FTTVBUF,0	;-1 FOR INTERNALLY BUFFERED TV SERVICE
	XD FTMTRACT,0	;-1 TO ENABLE ACCOUNTING USING ACCOUNTING METER
	XD FTMTRTIME,0	;-1 TO ENABLE TIME COMMAND TO TYPE OUT EBOX USEC
	XD FTSIX,0	;-1 TO INCLUDE SIXSER
	XD FTSPWT,0	;-1 TO ENABLE TTREAD FOR SERIALIZED KBD
	XD FTKIM,0	;-1 TO ENABLE KIM SERIAL TTYS
	XD FTTVFS,0	;-1 TO USE FREE STORAGE FOR TV BUFFER
	XD FT11CLK,0	;-1 TO ENABLE PDP11 BATTERY CLOCK CODE
	XD FTDCSH,0	;-1 TO ENABLE HAIRY DISK CACHE CODE
	XD FTC1BUG,0	;-1 TO ENABLE C1 DISK CHANNEL BUG TRAP RECORDING
	XD FTCSHD,0	;-1 TO CACHE CACDAT
	XD FTDDTIME,0	;-1 TO KEEP TRACK OF DELAY FOR ALL DD TASKS, PER TYPE
	XD FTHIFS,-1	;-1 FOR HIGH CORE FS FOR IMPSER
	XD FTIMPDB,0	;-1 FOR IMP DEBUGGING CODE
>;IFN FTLLL

IFN FTCCRMA,<	;CCRMA WAITS assembly switches, where different from SAIL's.
	XD FTDOM,0	;-1 to enable domain record caching
	XD FTPKTL,-1	;-1 to enable PUP packet logging
	XD FTETHX,-1	;-1 to allow user to hack random Ethernet packet types
	XD FTPUPD,-1	;-1 to chase a core clobbering bug (PUPSER)
	XD FTYODA,-1	;-1 for Yodanet features in PUPSER
	XD FTAIP,0	;-1 for ARPAnet IP
	XD FTSTRUC,0	;-1 to enable ''Disk Structures''
	XD FTRH,0	;-1 to enable code for RH-20 devices
	XD FTEIP,0	;-1 for Ethernet IP
	XD FTPRIQ,-1    ;-1 TO ENABLE PRIORITY SCHEDULING AND SL, ELSE ROUND ROBIN
	XD FTDKTM,-1	;-1 TO TIME DISK TRANSFERS
	XD FTNCU,0	;-1 TO AVOID CACHING SPECIAL PIECES OF UUO HANDLER
	XD DLNNUM,0	;NO DIALNET LINES TODAY, CANON HAS THAT PORT
	XD FTOTAP,0	;-1 FOR NON-INTERRUPTABLE TAPE MICROCODE
	XD FTVBEEP,-1	;-1 TO FLASH WHO LINE ON GRINNELL
	XD FTADRB,0	;-1 TO ENABLE AUTOMATIC ADDRESS BREAKING
	XD FTDLS,0	;-1 IF USING A DC10 (SIMULATION) ON F2
	XD FTSMBG,-1	;-1 IF SAMSER IS INCLUDED TO TRAP CONI SAMA, BUG (SEE SAMLO)
	XD FTAPR4,-1	;-1 TO PUT APR IN CHANNEL 4 AND DSK IN CHANNEL 3 (F2 only)
	XD FTDMAP,0	;-1 TO ENABLE MAPPING DDT IN AND OUT OF VIRTUAL SPACE
	XD FTSAM,-1	;-1 TO INCLUDE SAMPSON BOX SERVICE IN SAMSER
	XD FTGRIN,-1	;-1 TO INCLUDE GRINNELL CODE (SIMILAR TO DD)
	XD FTDDKLU,0	;NO DD OUTPUT POSSIBLY TO RELOCATE
	XD FTDD,0	;NO DATA DISCS ON THE F2 EVER
	XD FTDLSM,0	;-1 IF F2 MICROCODE NOW HAS MODEM CONTROL
	XD FTKL10,0	;F2 ISN'T A KL
	XD PRCONF,0	;BUT IT IS SORT OF A KA
	XD FTP2,0	;NO P2 ON THE F2
	XD FTREPT,0	;-1 TO ENABLE LINE EDITOR REPEAT COMMANDS
	XD FTMAOFF,0	;-1 IF KA HAS MAOFF BIT IN APR CONI (F2 DOESN'T)
	XD FTMPX,0	;-1 IF THERE IS A MAPPIPLEXOR
	XD FTNEWS,0	;-1 TO ENABLE THE NEWS SERVICE PHANTOMS, ETC.
	XD FTDDSTAT,0	;-1 TO INCLUDE THE DATA DISK STATISTICS FEATURE
	XD FTDDBG,0	;-1 FOR DATA DISK QUEUE CHECKING
	XD FTCSCB,0	;-1 FOR PWAIT/XWAIT BUG TRAP
	XD FTDSKM,0	;-1 FOR DISK USE OF MAPPIPLEXOR
	XD FTSWPM,0	;-1 FOR SWAPPER USE OF MAPPIPLEXOR
	XD FTDDDM,0	;-1 FOR DATA DISK USE OF MAPPIPLEXOR
	XD FTTVBUF,0	;-1 FOR INTERNALLY BUFFERED TV SERVICE
	XD FTMTRACT,0	;-1 TO ENABLE ACCOUNTING USING ACCOUNTING METER
	XD FTMTRTIME,0	;-1 TO ENABLE TIME COMMAND TO TYPE OUT EBOX USEC
	XD FTSIX,0	;-1 TO INCLUDE SIXSER
	XD FTSPWT,0	;-1 TO ENABLE TTREAD FOR SERIALIZED KBD
	XD FTKIM,0	;-1 TO ENABLE KIM SERIAL TTYS
	XD FTTVFS,0	;-1 TO USE FREE STORAGE FOR TV BUFFER
	XD FT11CLK,0	;-1 TO ENABLE PDP11 BATTERY CLOCK CODE
	XD FTDCSH,0	;-1 TO ENABLE HAIRY DISK CACHE CODE
	XD FTC1BUG,0	;-1 TO ENABLE C1 DISK CHANNEL BUG TRAP RECORDING
	XD FTCSHD,0	;-1 TO CACHE CACDAT
	XD FTDDTIME,0	;-1 TO KEEP TRACK OF DELAY FOR ALL DD TASKS, PER TYPE
	XD FTHIFS,0	;-1 FOR HIGH CORE FS FOR IMPSER
	XD FTIMPDB,0	;-1 FOR IMP DEBUGGING CODE
>;IFN FTCCRMA
IFN FTDD,<
 IFN FTGRIN,<.FATAL Make up your mind, you can't have DDs and Grinnell too!>
>;IFN FTDD
IFN FTDLS,<
IFE FTF2,< PRINTX No guarantee FTDLS will work on a real DC10!>
IFN FTF2,< PRINTX ⊗⊗⊗ You are assembling for DLS!!  No modem control, different microcode.>
>;IFN FTDLS

IFE FTKL10,<XD FTKLB,0>		;if not KL10, can't be KL model B
IFN FTKLB,<XD FTCINS,0>		;no checksum instruction on KL model B (yet)

XD FTIP,FTAIP!FTEIP		;IP if ARPAnet or Ethernet IP
;Macros for setting up system name

;Macro called SYSTEM is defined at top of page 2.

DEFINE .TTL2 (IGNORE,MONHST,MONNAM,MONSER)<
DEFINE .TTL !(MONVER,MONDAT)<
TITLE MONNAM MONSER!.!MONVER
PRINTS\You are assembling: MONHST MONNAM MONSER!.!MONVER  MONDAT
Did you remember to change SYSTEM in HEAD?
\
DEFINE SYSTXT<ASCIZ\MONHST MONNAM MONSER!.!MONVER  Assembled MONDAT\>
DEFINE DOMTXT<ASCIZ\MONHST\>
IFN DIFSYS,<
PRINTS /								 *****
*** I hope you really mean to be compiling WAITS for running at  MONHST *****
								 *****
/
>;DIFSYS
>;.TTL
>;.TTL2

RADIX =10

;9 series for P2 separate, 8 series for KL10,
;7 series for BBN pager, 6 series otherwise

↓SERIES←←9
↓P2SERIES←←1

IFN FTSUAI,< DEFINE MONHST<0,<SAIL.Stanford.EDU>>> ;See FAIL manual complex macro example!
IFN FTCCRMA,< DEFINE MONHST<0,<CCRMA-F4>>>
IFN FTLLL,<
  IFN FTDLS,< DEFINE MONHST<0,<S1-A (DLS)>>>
  IFE FTDLS,< DEFINE MONHST<0,<S1-A>>>
>;IFN FTLLL
;IFN FTKLB,< DEFINE MONHST<0,<SAIL KL-10/Model-B>>>	;See FAIL manual complex macro example!
IFN FTSUAI,<
IFE FTKLB,< .FATAL Hey, you're compiling for the KL-10 model-A !!
>;IFE FTKLB
>;IFN FTSUAI


;The following value is nonzero if we're being compiled at a site other than
;that at which we're configured to be run.
DIFSYS←←	 IFNDEF F2UUO,<FTF2;> 0
DIFSYS←←DIFSYS ! IFDEF F2UUO,<<¬FTF2>;> 0
DIFSYS←←DIFSYS ! IFNDEF LLLUUO,<FTLLL;> 0
DIFSYS←←DIFSYS ! IFDEF LLLUUO,<<¬FTLLL>;> 0
DIFSYS←←DIFSYS & 1	;don't be confused by an FTxxx set to 1 or -1.

IFNDEF P1END,<
    IFE P2SYS,<.TTL2(\MONHST,WAITS,\SERIES)>
    IFN P2SYS,<.TTL2(\MONHST,P2SYS,\P2SERIES)>
>;IFNDEF P1END
IFDEF P1END,<	;P1END is defined in P1END, naturally, for FTSEPONCE
    .TTL2(\MONHST,P1END,\SERIES)
>;IFDEF P1END

;Next line actually calls .TTL, and thus does a TITLE pseudo-op.
SYSTEM

IFE FTKL10,< XD WATCPU,0 ;CPU-type code number: 0 is F2 (or KA-10 w/BBN pager) >
IFN FTKL10,< XD WATCPU,1 ;CPU-type code number: 1 is KL-10 >

RADIX 8

PURGE .TTL,.TTL2,SYSTEM,MONHST,DIFSYS
;These definitions are for @'s benefit

DEFINE .XCREF <;DON'T CREF THESE SYMBOLS>
DEFINE .AUXIL <>;DON'T CREF THE FILE'S UNUSED SYMBOLS
.AUXIL

; Don't cref AC's
.XCREF IOS,TAC,TAC1,P,J,DAT,DDB,PROG,TEM,DSER,UCHN,PID,UUO,AC1,AC2,AC3

; Alternative AC names.  Flush someday
.XCREF LINE,ITEM,JBUF,CHR,BUFPNT,PDB,A,AC,AC0,B,BLK,BLOCK,C,D,SIZE
.XCREF I,L,PC,Q,QJ,QR,T2,W,WHO

; DDT's AC's
.XCREF F,T,W1,W2,SCH,AR,ODF,TT,SMB,R,S,W

;MACRO code's AC names
.XCREF S,W,U,J,F,T1,T2,T3,T4,P1,P2,P3,P4,P5,P6,M,R,P

; XCTR fields
.XCREF XCTR,P2XR,P2XW,P2XRW,P2XLB,P2STKR,P2STKW,P2XRSW,P2XE
.XCREF XR,XW,XRW,XE,XLB,XDB,XSTKR,XSTKW,XWSTKR,XBLTR,XBLTW,XBLTRW

;Symbol defining macros, subroutine macros
.XCREF XD,XP,RET,CALL

; Random things that @ thinks are symbols
.XCREF ARE,FROM,IS,IT,OFF,ON,BE,AND,$,AT
